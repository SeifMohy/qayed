// Egyptian banks mapping for bank name normalization
export const EGYPTIAN_BANKS = {
  'ahli_united': 'الأهلي المتحد',
  'commercial_international': 'البنك التجاري الدولي',
  'national_bank_egypt': 'البنك الأهلي المصري',
  'banque_misr': 'بنك مصر',
  'qnb_alahli': 'QNB الأهلي',
  'arab_african': 'العربي الأفريقي',
  'banque_du_caire': 'بنك القاهرة',
  'alex_bank': 'بنك الإسكندرية',
  'adcb': 'أبو ظبي التجاري',
  'nbe': 'البنك الأهلي المصري',
  'cib': 'البنك التجاري الدولي',
  'emirates_nbd': 'الإمارات دبي الوطني',
  'hsbc': 'HSBC',
  'arab_bank': 'البنك العربي',
  'faisal_islamic': 'بنك فيصل الإسلامي',
  'arab_investment': 'العربي للاستثمار',
  'suez_canal': 'قناة السويس',
  'development_industrial': 'التنمية والائتمان الصناعي',
  'housing_development': 'الإسكان والتعمير',
  'principal': 'برنسيبال',
  'investment_arab': 'الاستثمار العربي',
  'egyptian_gulf': 'المصري الخليجي',
  'agricultural_development': 'التنمية الزراعية',
  'arab_banking': 'المصرفية العربية',
  'al_baraka': 'البركة',
  'export_development': 'التصدير والتنمية',
  'agricultural_credit': 'الائتمان الزراعي',
  'arab_international': 'العربي الدولي',
  'credit_agricole': 'كريدي أجريكول',
  'societe_generale': 'سوسيتيه جنرال',
  'national_societe_generale': 'الأهلي سوسيتيه جنرال',
  'mashreq': 'المشرق',
  'attijariwafa': 'التجاري وفا',
  'midb': 'بنك التنمية الصناعية والعمالية',
  'saib': 'بنك الشركة المصرفية العربية الدولية',
  'union_national': 'الاتحاد الوطني',
  'arab_jordan': 'الأردني العربي',
  'blom': 'بلوم',
  'industrial_development': 'التنمية الصناعية',
  'first_abu_dhabi': 'أبو ظبي الأول',
  'commercial_kuwait': 'الكويت التجاري',
  'arab_bank_egypt': 'البنك العربي مصر',
  'post_office': 'البريد المصري',
  'gulf_bank': 'الخليج',
  'national_bank_kuwait': 'الكويت الوطني',
  'national_bank_oman': 'عمان الوطني',
  'commercial_bank_qatar': 'قطر التجاري',
  'doha_bank': 'الدوحة',
  'islamic_bank_abu_dhabi': 'أبو ظبي الإسلامي',
  'dubai_islamic': 'دبي الإسلامي',
  'al_rajhi': 'الراجحي',
  'riyad_bank': 'الرياض',
  'samba': 'سامبا',
  'national_commercial': 'الأهلي التجاري',
  'bsf': 'بنك الشركة السعودية الفرنسية',
  'abb': 'البنك الأهلي البحريني',
  'gulf_international': 'الخليج الدولي',
  'first_national': 'الأول الوطني',
  'arab_national': 'العربي الوطني',
  'bank_of_beirut': 'بنك بيروت',
  'lebanese_french': 'اللبناني الفرنسي',
  'byblos': 'بيبلوس',
  'audi': 'عوده',
  'fransabank': 'فرنسا بنك',
  'sgbl': 'الشركة العامة للبنان',
  'creditbank': 'كريدت بنك',
  'american_express': 'أمريكان إكسبرس',
  'citibank': 'سيتي بنك',
  'standard_chartered': 'ستاندرد تشارترد',
  'egyptian_american': 'المصري الأمريكي',
  'arab_african_international': 'العربي الأفريقي الدولي',
  'national_bank_greece': 'اليونان الوطني',
  'piraeus': 'بيرايوس',
  'alpha_bank': 'ألفا بنك',
  'bank_of_alexandria': 'بنك الإسكندرية',
  'banque_misr_liban': 'بنك مصر لبنان',
  'arab_bank_plc': 'البنك العربي المحدود',
  'commercial_bank_of_kuwait': 'الكويت التجاري',
  'gulf_bank_kuwait': 'الخليج الكويتي',
  'national_bank_of_kuwait': 'الكويت الوطني',
  'commercial_bank_of_qatar': 'قطر التجاري',
  'qatar_national_bank': 'قطر الوطني',
  'islamic_bank_of_britain': 'بريطانيا الإسلامي',
  'al_rayan': 'الريان',
  'qatar_islamic': 'قطر الإسلامي',
  'commercial_bank_international': 'التجاري الدولي',
  'arab_banking_corporation': 'المؤسسة العربية المصرفية',
  'gulf_international_bank': 'الخليج الدولي',
  'future_bank': 'بنك المستقبل',
  'khaleeji_commercial': 'الخليجي التجاري',
  'ithmaar': 'إثمار',
  'al_salam': 'السلام',
  'bbk': 'بنك البحرين والكويت',
  'national_bank_bahrain': 'البحرين الوطني',
  'arab_banking_corp': 'المؤسسة العربية المصرفية',
  'investcorp': 'إنفستكورب',
  'gulf_finance': 'الخليج للتمويل',
  'bmmi': 'البحرين والشرق الأوسط الإسلامي',
  'taib_bank': 'طيبة',
  'elaf_bank': 'إيلاف',
  'khaleeji_bank': 'الخليجي',
  'venture_capital': 'رأس المال الاستثماري',
  'liquidity_management': 'إدارة السيولة',
  'securities_investment': 'الاستثمار في الأوراق المالية',
  'development_bank': 'بنك التنمية',
  'islamic_development': 'التنمية الإسلامية',
  'arab_monetary_fund': 'صندوق النقد العربي',
  'opec_fund': 'صندوق أوبك'
};

// Function to find Egyptian bank display name from input text
export function findEgyptianBankDisplayName(inputText: string): string | null {
  if (!inputText || typeof inputText !== 'string') {
    return null;
  }

  const normalizedInput = inputText.toLowerCase().trim();
  
  // Direct match with values (Arabic names)
  for (const [key, value] of Object.entries(EGYPTIAN_BANKS)) {
    if (value.toLowerCase().includes(normalizedInput) || 
        normalizedInput.includes(value.toLowerCase())) {
      return value;
    }
  }

  // Match with keys (English identifiers)
  for (const [key, value] of Object.entries(EGYPTIAN_BANKS)) {
    if (key.toLowerCase().includes(normalizedInput) || 
        normalizedInput.includes(key.toLowerCase())) {
      return value;
    }
  }

  // Specific pattern matching for common variations
  const patterns = [
    { pattern: /ahli|الأهلي/i, bank: EGYPTIAN_BANKS.national_bank_egypt },
    { pattern: /misr|مصر/i, bank: EGYPTIAN_BANKS.banque_misr },
    { pattern: /commercial|تجاري/i, bank: EGYPTIAN_BANKS.commercial_international },
    { pattern: /qnb/i, bank: EGYPTIAN_BANKS.qnb_alahli },
    { pattern: /arab|عربي/i, bank: EGYPTIAN_BANKS.arab_african },
    { pattern: /cairo|القاهرة/i, bank: EGYPTIAN_BANKS.banque_du_caire },
    { pattern: /alex|إسكندرية/i, bank: EGYPTIAN_BANKS.alex_bank },
    { pattern: /adcb|أبو ظبي/i, bank: EGYPTIAN_BANKS.adcb },
    { pattern: /hsbc/i, bank: EGYPTIAN_BANKS.hsbc },
    { pattern: /faisal|فيصل/i, bank: EGYPTIAN_BANKS.faisal_islamic }
  ];

  for (const { pattern, bank } of patterns) {
    if (pattern.test(normalizedInput)) {
      return bank;
    }
  }

  return null;
}

// PDF Configuration
export const PDF_CONFIG = {
  MAX_PAGES_PER_CHUNK: 5,
  PROCESSING_DELAY: 1000, // 1 second delay between chunks
  MAX_RETRIES: 3,
  RETRY_BASE_DELAY: 2000, // 2 seconds base delay for retries
}; 